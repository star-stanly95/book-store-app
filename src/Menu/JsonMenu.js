import React from 'react'

const electionMenu = [
    {
        "year": "2000 - 2004",
        "electiontype": [
            {
                "type": "Election",
                "Elections": [
                    {
                        "Electionid": "13",
                        "ElectionType": "G",
                        "ElectionName": "2004 General Election",
                        "ISActive": "0",
                        "ElectionYear": "2004",
                        "ElectionDate": "11/02/2004"
                    },
                    {
                        "Electionid": "12",
                        "ElectionType": "G",
                        "ElectionName": "2003 Municipal Election",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "11/04/2003"
                    },
                    {
                        "Electionid": "11",
                        "ElectionType": "G",
                        "ElectionName": "2002 General Election",
                        "ISActive": "0",
                        "ElectionYear": "2002",
                        "ElectionDate": "11/05/2002"
                    },
                    {
                        "Electionid": "10",
                        "ElectionType": "G",
                        "ElectionName": "2001 Municipal Election",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "11/06/2001"
                    },
                    {
                        "Electionid": "9",
                        "ElectionType": "G",
                        "ElectionName": "2000 General Election",
                        "ISActive": "0",
                        "ElectionYear": "2000",
                        "ElectionDate": "11/07/2000"
                    }
                ]
            },
            {
                "type": "Primary",
                "Elections": [
                    {
                        "Electionid": "13",
                        "ElectionType": "P",
                        "ElectionName": "2004 General Primary",
                        "ISActive": "0",
                        "ElectionYear": "2004",
                        "ElectionDate": "04/27/2004"
                    },
                    {
                        "Electionid": "12",
                        "ElectionType": "P",
                        "ElectionName": "2003 Municipal Primary",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "05/20/2003"
                    },
                    {
                        "Electionid": "11",
                        "ElectionType": "P",
                        "ElectionName": "2002 General Primary",
                        "ISActive": "0",
                        "ElectionYear": "2002",
                        "ElectionDate": "05/21/2002"
                    },
                    {
                        "Electionid": "10",
                        "ElectionType": "P",
                        "ElectionName": "2001 Municipal Primary",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "05/15/2001"
                    },
                    {
                        "Electionid": "9",
                        "ElectionType": "P",
                        "ElectionName": "2000 General Primary",
                        "ISActive": "0",
                        "ElectionYear": "2000",
                        "ElectionDate": "04/04/2000"
                    }
                ]
            },
            {
                "type": "Special",
                "Elections": [
                    {
                        "Electionid": "100132",
                        "ElectionType": "S",
                        "ElectionName": "2004 Special Election 152nd Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2004",
                        "ElectionDate": "03/09/2004"
                    },
                    {
                        "Electionid": "100131",
                        "ElectionType": "S",
                        "ElectionName": "2004 Special Election 109th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2004",
                        "ElectionDate": "01/27/2004"
                    },
                    {
                        "Electionid": "100130",
                        "ElectionType": "S",
                        "ElectionName": "2003 Special Election 27th Senatorial District",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "11/04/2003"
                    },
                    {
                        "Electionid": "100129",
                        "ElectionType": "S",
                        "ElectionName": "2003 Special Election 3rd Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "07/22/2003"
                    },
                    {
                        "Electionid": "100128",
                        "ElectionType": "S",
                        "ElectionName": "2003 Special Election 168th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "06/17/2003"
                    },
                    {
                        "Electionid": "100127",
                        "ElectionType": "S",
                        "ElectionName": "2003 Special Election 44th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "06/17/2003"
                    },
                    {
                        "Electionid": "100126",
                        "ElectionType": "S",
                        "ElectionName": "2003 Special Election 99th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "03/18/2003"
                    },
                    {
                        "Electionid": "100125",
                        "ElectionType": "S",
                        "ElectionName": "2003 Special Election 37th Senatorial District",
                        "ISActive": "0",
                        "ElectionYear": "2003",
                        "ElectionDate": "03/11/2003"
                    },
                    {
                        "Electionid": "100124",
                        "ElectionType": "S",
                        "ElectionName": "2002 Special Election 9th Senatorial District",
                        "ISActive": "0",
                        "ElectionYear": "2002",
                        "ElectionDate": "10/01/2002"
                    },
                    {
                        "Electionid": "100123",
                        "ElectionType": "S",
                        "ElectionName": "2002 Special Election 100th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2002",
                        "ElectionDate": "07/16/2002"
                    },
                    {
                        "Electionid": "100122",
                        "ElectionType": "S",
                        "ElectionName": "2002 Special Election 176th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2002",
                        "ElectionDate": "04/23/2002"
                    },
                    {
                        "Electionid": "100133",
                        "ElectionType": "S",
                        "ElectionName": "2002 Special Election 149th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2002",
                        "ElectionDate": "02/12/2002"
                    },
                    {
                        "Electionid": "100121",
                        "ElectionType": "S",
                        "ElectionName": "2001 Special Election 17th Senatorial District",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "11/06/2001"
                    },
                    {
                        "Electionid": "100005",
                        "ElectionType": "S",
                        "ElectionName": "2001 Special Election 9th Congressional District",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "11/06/2001"
                    },
                    {
                        "Electionid": "100120",
                        "ElectionType": "S",
                        "ElectionName": "2001 Special Election 2nd Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "08/14/2001"
                    },
                    {
                        "Electionid": "100119",
                        "ElectionType": "S",
                        "ElectionName": "2001 Special Election 28th Legislative District",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "06/26/2001"
                    },
                    {
                        "Electionid": "100118",
                        "ElectionType": "S",
                        "ElectionName": "2001 Special Election 26th Senatorial District",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "03/20/2001"
                    },
                    {
                        "Electionid": "100117",
                        "ElectionType": "S",
                        "ElectionName": "2001 Special Election 40th Senatorial District",
                        "ISActive": "0",
                        "ElectionYear": "2001",
                        "ElectionDate": "03/20/2001"
                    }
                ]
            }
        ]
    }
]


const MenuItem = ({ item }) => (
    <li class="has-children">
        <a href={item.link}>{item.label}</a>
        {item.submenu && <SubMenu items={item.submenu} />}
    </li>
);

const SubMenu = ({ items }) => (
    <ul >
        {items.map((subItem) => (
            <MenuItem key={subItem.id} item={subItem} />
        ))}
    </ul>
);

const ComplexMenu = () => {


    const result = electionMenu.map((elec, i) => ({
        id: i,
        label: elec.year,
        submenu: elec.electiontype.map((secondmenu, j) => ({
            id: j,
            label: secondmenu.type,
            submenu: secondmenu.Elections.map((lastitem, k) => ({
                id: lastitem.Electionid,
                label: lastitem.ElectionName,
                link: lastitem.ElectionName.replace(/\s+/g, '-')+'-' + lastitem.Electionid
            }))
        })
        )
    }));

    const finalJson=[{id:1,label:"Elections",submenu:result}]

    console.log(finalJson)

    return (
        <nav className="navbar">
            <ul className='navbar-menu'>
                {finalJson.map((item) => (
                    <MenuItem key={item.id} item={item} />
                ))}
            </ul>
        </nav>
    )
};
export default ComplexMenu;